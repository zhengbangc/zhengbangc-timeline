!function(i,n){var t,o=i.mobile.popup.handleLink,e=function(i){return t=i,o.apply(this,arguments)};i.mobile.popup.handleLink=e,i.widget("mobile.popup",i.mobile.popup,{options:{align:"0.5,0.5"},open:function(i){return this._ui.link=t,this._super(i)},_closePrereqsDone:function(){this._ui.link=null,this._superApply(arguments)},_alignmentToCoeffs:function(i){return{originCoeff:0>i?0:1>=i?i:1,popupCoeff:0>i?i:1>=i?-i:i-2}},_getAlignment:function(){var i,n;return this.options.align&&(i=this.options.align.split(",")),i&&i.length>0&&(n={x:parseFloat(i[0]),y:i.length>1?parseFloat(i[1]):n.x}),!n||isNaN(n.x)||isNaN(n.y)?void 0:{x:this._alignmentToCoeffs(n.x),y:this._alignmentToCoeffs(n.y)}},_setOptions:function(i){var t,o;this._super(i),!this._isOpen||i.align===n||null===this._ui.link||"origin"!==this._ui.link.jqmData("position-to")&&"origin"!==this.options.positionTo||(t=this._ui.link.offset(),o={cx:this._ui.link.outerWidth(),cy:this._ui.link.outerHeight()},this._reposition({x:t.left+o.cx/2,y:t.top+o.cy/2,positionTo:"origin"}))},_alignedCoord:function(i,n,t,o){return i+n.originCoeff*t+n.popupCoeff*o+o/2},_desiredCoords:function(i){var n,t,o,e=this._getAlignment();return e&&"origin"===i.positionTo&&this._ui.link&&(o=this._clampPopupWidth(!0),o.menuSize.cx=Math.min(o.menuSize.cx,o.rc.cx),t=this._ui.link.offset(),n={x:t.left,y:t.top,cx:this._ui.link.outerWidth(),cy:this._ui.link.outerHeight()},i.x=this._alignedCoord(n.x,e.x,n.cx,o.menuSize.cx),i.y=this._alignedCoord(n.y,e.y,n.cy,o.menuSize.cy)),this._super(i)}})}(jQuery);