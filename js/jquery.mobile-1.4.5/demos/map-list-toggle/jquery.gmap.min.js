!function(t){function a(t){t||(t=i);var a=t.split(",");if(2!=a.length)throw'Invalid lat/lng: "'+t+'"';var n=parseFloat(a[0]),e=parseFloat(a[1]);if(isNaN(n)||-90>n||n>90||isNaN(e)||-180>e||e>180)throw'Invalid lat/lng: "'+t+'"';return new google.maps.LatLng(n,e)}function n(t){t||(t=i);var a=t.split(",");if(3!=a.length)throw'Invalid lat/lng/zoom: "'+t+'"';var n=parseFloat(a[0]),e=parseFloat(a[1]),o=parseInt(a[2]);if(isNaN(n)||-90>n||n>90||isNaN(e)||-180>e||e>180||3>o||o>30)throw'Invalid lat/lng/zoom: "'+t+'"';return{center:new google.maps.LatLng(n,e),zoom:o}}var e="gmap",i="44.80,-93.16,5",o={init:function(a){if(!("google"in window&&"maps"in google))throw"Google maps API did not complete loading";var i=t(this);i.data(e,a),i.addClass("ui-gmap").html('<div class="ui-gmap-canvas"></div>');var o=n(i.attr("data-initial-view"));o.mapTypeId=google.maps.MapTypeId.ROADMAP,o.zoomControlOptions={position:google.maps.ControlPosition.LEFT_CENTER};var r=i.find(".ui-gmap-canvas"),s=new google.maps.Map(r.get(0),o);i.data(e+".map",s),a.autoAddMarkers&&t(this).gmap("addMarkersFromDOM"),r.resize(function(){google.maps.event.trigger(s,"resize")})},addMarkersFromDOM:function(){var n=[];t("[data-marker-info]").each(function(){try{var e=a(t(this).attr("data-marker-info"));n.push({position:e,title:t(this).find(".ui-gmap-marker-title").html(),content:t(this).find(".ui-gmap-marker-info").andSelf().filter(".ui-gmap-marker-info").clone().get(0)})}catch(i){console.log(i)}});var i=t(this).data(e),o=t(this).data(e+".map"),r=t(this).gmap("addMarkers",n);if(!r.isEmpty()){var s=r.toSpan();s.lat()<1e-4||s.lng()<1e-4?(o.setCenter(r.getCenter()),o.setZoom(i.zoomForSingleMarker)):o.fitBounds(r)}},addMarkers:function(a){var n=(t(this).data(e),t(this).data(e+".map")),i=new google.maps.LatLngBounds,o=new InfoBox({boxStyle:{border:"1px solid black",background:"white",width:"220px",padding:"5px"},closeBoxURL:"http://maps.google.com/mapfiles/close.gif"}),r="44.80",s="-93.16";if(r&&s){var g=new google.maps.LatLng(r,s);new google.maps.Marker({map:n,position:g,icon:"http://labs.google.com/ridefinder/images/mm_20_green.png"}),i.extend(g)}return t.each(a,function(){var a="http://maps.google.com/mapfiles/marker.png",e=new google.maps.Marker({map:n,position:this.position,title:this.title,icon:a}),r=this.content;r&&google.maps.event.addListener(e,"click",function(a,n,e){return function(){o.setContent(t(e).html()),o.open(a,n)}}(n,e,r)),i.extend(this.position)}),i}},r={autoAddMarkers:!0,zoomForSingleMarker:15,infoWindowConfig:{maxWidth:175}};t.fn[e]=function(){if(0==arguments.length){var a=t.extend({},r);return t(this).each(function(){o.init.call(this,a)}),this}if(1==arguments.length&&t.isPlainObject(arguments[0])){var a=t.extend({},r,arguments[0]);return t(this).each(function(){o.init.call(this,a)}),this}var n=o[arguments[0]];if(t.isFunction(n)){for(var i=[],s=1;s<arguments.length;s++)i.push(arguments[s]);return n.apply(this,i)}return alert("Function "+arguments[0]+" is not supported by the "+e+" plugin."),this}}(jQuery);