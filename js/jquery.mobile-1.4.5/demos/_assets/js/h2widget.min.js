!function(e){var a,i="";e(document).on("click","a",function(){a=e(this).attr("href");var t=e.mobile.path.parseUrl(a);if("undefined"!=typeof a&&""!==t&&a!==a.replace(t,"")&&-1!==t.search("/")){var n=a.replace(t,"");e(this).attr("href",n)}i=e(this)}),e(document).on("pagebeforechange",function(e,i){i.originalHref=a}),e(document).on("pagebeforechange",function(t,n){var l,o,s=e.mobile.path.parseUrl(n.toPage).hash;try{l=e(s)}catch(t){l=e()}try{o=e(".ui-page-active "+s)}catch(t){o=e()}if(!("undefined"!=typeof s&&-1===s.search("/")&&""!==s&&l.length>0)||l.hasClass("ui-page")||l.hasClass("ui-popup")||"page"===l.data("role")||o.hasClass("ui-panel")||o.hasClass("ui-popup"))"object"==typeof n.toPage||""===s||""===e.mobile.path.parseUrl(a).hash||l.hasClass("ui-page")||"page"===l.attr("data-role")||o.hasClass("ui-panel")||o.hasClass("ui-popup")||(e(i).attr("href",a),e.mobile.document.one("pagechange",function(){if("undefined"!=typeof s&&-1===s.search("/")&&""!==s&&l.length>0&&o.length>0&&!l.hasClass("ui-page")&&"page"!==l.data("role")&&!o.hasClass("ui-panel")&&!o.hasClass("ui-popup")){s=e.mobile.path.parseUrl(a).hash;var i=o.offset().top;e.mobile.silentScroll(i)}}));else{var c=l.offset().top;e.mobile.silentScroll(c),e.mobile.navigate(s,"",!0)}}),e(document).on("mobileinit",function(){hash=window.location.hash,e.mobile.document.one("pageshow",function(){var a,i;try{a=e(hash)}catch(t){a=e()}try{i=e(".ui-page-active "+hash)}catch(t){i=e()}if(""!==hash&&a.length>0&&i.length>0&&"page"!==a.attr("data-role")&&!a.hasClass("ui-page")&&!i.hasClass("ui-panel")&&!i.hasClass("ui-popup")&&!a.is("body")){var n=i.offset().top;setTimeout(function(){e.mobile.silentScroll(n)},100)}})}),e(document).on("mobileinit",function(){e.widget("mobile.h2linker",{options:{initSelector:":jqmData(quicklinks='true')"},_create:function(){var a=this,i="ui-page-top",t="<div data-role='panel' class='jqm-nav-panel jqm-quicklink-panel' data-position='right' data-display='overlay' data-theme='a'><ul data-role='listview' data-inset='false' data-theme='a' data-divider-theme='a' data-icon='false' class='jqm-list'><li data-role='list-divider'>Quick Links</li></ul></div>",n=!0,l=new Object;"undefined"==typeof e("body").attr("id")?e("body").attr("id",i):i=e("body").attr("id"),this.element.find("div.jqm-content>h2").each(function(){var a,t=e(this).text();"undefined"==typeof e(this).attr("id")?(a=t.replace(/[^\.a-z0-9:_-]+/gi,""),e(this).attr("id",a)):a=e(this).attr("id"),l[a]=t,e(this).before(n?"<a href='#' data-ajax='false' class='jqm-deeplink jqm-open-quicklink-panel ui-icon-carat-l ui-alt-icon'>Quick Links</a>":"<a href='#"+i+"' class='jqm-deeplink ui-icon-carat-u ui-alt-icon'>Top</a>"),n=!1}),this._on(".jqm-open-quicklink-panel",{click:function(){return e(".ui-page-active .jqm-quicklink-panel").panel("open"),!1}}),this._on(document,{pagebeforechange:function(){this.element.find(".jqm-quicklink-panel").panel("close"),this.element.find(".jqm-quicklink-panel .ui-btn-active").removeClass("ui-btn-active")}}),e(l).length>0&&(this.element.prepend(t),this.element.find(".jqm-quicklink-panel").panel().find("ul").listview()),e.each(l,function(e,i){a.element.find(".jqm-quicklink-panel ul").append("<li><a href='#"+e+"'>"+i+"</a></li>")}),a.element.find(".jqm-quicklink-panel ul").listview("refresh")}})}),e(document).bind("pagecreate create",function(a){e.mobile.h2linker.prototype.options.initSelector;e(a.target).data("quicklinks")&&e(a.target).h2linker()})}(jQuery);